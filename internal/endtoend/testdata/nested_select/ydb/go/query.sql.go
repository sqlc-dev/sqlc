// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: query.sql

package querytest

import (
	"context"
)

const nestedSelect = `-- name: NestedSelect :one
SELECT latest.id, t.count
FROM (
    SELECT id, MAX(update_time) AS update_time
    FROM test
    WHERE test.id IN $ids
        AND test.update_time >= $start_time
    GROUP BY id
) latest
INNER JOIN test t USING (id, update_time)
`

type NestedSelectParams struct {
	Ids       []int64
	StartTime int64
}

type NestedSelectRow struct {
	ID    int64
	Count int64
}

func (q *Queries) NestedSelect(ctx context.Context, arg NestedSelectParams) (NestedSelectRow, error) {
	row := q.db.QueryRowContext(ctx, nestedSelect, arg.Ids, arg.StartTime)
	var i NestedSelectRow
	err := row.Scan(&i.ID, &i.Count)
	return i, err
}
