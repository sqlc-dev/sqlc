// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: query.sql

package querytest

import (
	"context"
)

const getFooLateral = `-- name: GetFooLateral :many
SELECT val, result FROM foo_lateral
`

func (q *Queries) GetFooLateral(ctx context.Context) ([]FooLateral, error) {
	rows, err := q.db.Query(ctx, getFooLateral)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []FooLateral
	for rows.Next() {
		var i FooLateral
		if err := rows.Scan(&i.Val, &i.Result); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getFooLateralDirect = `-- name: GetFooLateralDirect :many
SELECT f.id, f.val, sub.result
FROM foo f
CROSS JOIN LATERAL (
  SELECT f.val || '-direct' AS result
) sub
`

type GetFooLateralDirectRow struct {
	ID     int32
	Val    string
	Result interface{}
}

func (q *Queries) GetFooLateralDirect(ctx context.Context) ([]GetFooLateralDirectRow, error) {
	rows, err := q.db.Query(ctx, getFooLateralDirect)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetFooLateralDirectRow
	for rows.Next() {
		var i GetFooLateralDirectRow
		if err := rows.Scan(&i.ID, &i.Val, &i.Result); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
